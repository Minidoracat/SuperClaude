# æŒ‡ä»¤æ¶æ§‹æ¨¡å¼ - çµ±ä¸€æŒ‡ä»¤è¨­è¨ˆ
# ç¶œåˆæŒ‡ä»¤çµæ§‹ã€è¨˜æ†¶é«”ç®¡ç†å’Œç¯„æœ¬æ¨¡å¼

## åœ–ä¾‹
@include universal-constants.yml#Universal_Legend

## æŒ‡ä»¤çµæ§‹æ¨™æº–

```yaml
Required_Sections:
  1_Purpose: "**ç›®çš„**: å–®å¥æè¿°æŒ‡ä»¤åŠŸèƒ½"
  2_Legend: "@include universal-constants.yml#Universal_Legend"
  3_Execution: "åŸ·è¡Œ: ç«‹å³ã€‚--planâ†’å…ˆé¡¯ç¤ºè¨ˆç•«"
  4_Description: "[æŒ‡ä»¤ç‰¹å®šæè¿°]"
  5_Flags: "@include flag-inheritance.yml#Universal_Always"
  6_Examples: "æœ€å°‘ 3 å€‹ç¯„ä¾‹ â†’ é æœŸçµæœ"
  7_Integration: "å…ˆæ±ºæ¢ä»¶èˆ‡å¾ŒçºŒæ­¥é©Ÿ"

Command_Categories:
  Analysis: ["analyze", "load", "explain", "troubleshoot"]
  Build: ["build", "spawn"] 
  Quality: ["test", "scan", "improve"]
  Operations: ["deploy", "migrate", "cleanup"]
  Documentation: ["document", "estimate"]

Standard_Structure:
  Header_Format: "**ç›®çš„**: {ç°¡è¦æè¿°}"
  Execution_Pattern: "åŸ·è¡Œ: ç«‹å³ã€‚--planâ†’å…ˆé¡¯ç¤ºè¨ˆç•«"
  Flag_Reference: "@include flag-inheritance.yml#Universal_Always"
  Example_Pattern: "- `/{command} --flag` - æè¿°"
```

## å¢å¼·çš„çµæœå„²å­˜èˆ‡ä¸Šä¸‹æ–‡ç®¡ç†

```yaml
Cache_Architecture:
  Storage_Format:
    analyze: "{issues[], metrics{}, hotspots[], patterns[]}"
    build: "{artifacts[], errors[], warnings[], perf{}}"
    test: "{passed[], failed[], coverage%, flaky[]}"
    scan: "{vulns[], risks{}, fixes[], compliance{}}"
    design: "{arch{}, patterns[], decisions[]}"
    troubleshoot: "{findings[], root_causes[], solutions[]}"

  Reuse_Rules:
    Same_Target_Flags: "ä½¿ç”¨å¿«å– | ä¿®æ”¹çš„æª”æ¡ˆ â†’ ä½¿å¿«å–å¤±æ•ˆ"
    Chained_Commands: "è‡ªå‹•å‚³éçµæœ | æ™‚é™: 30åˆ†é˜"
    Persistent_Patterns: "è·¨æœƒè©±å„²å­˜æˆåŠŸçš„å·¥ä½œæµç¨‹"
    Context_Sharing: "å‚³éç›¸é—œå­é›† â†’ ä¸‹ä¸€å€‹æŒ‡ä»¤"

Intelligent_Workflows:
  analyzeâ†’improve: "ä½¿ç”¨ç™¼ç¾çš„å•é¡Œä½œç‚ºç›®æ¨™ + å„ªå…ˆé †åºæ’åº"
  buildâ†’test: "å°ˆæ³¨æ–¼è®Šæ›´çš„æ¨¡çµ„ + æ•´åˆé»"
  scanâ†’fix: "å„ªå…ˆè™•ç†é—œéµæ¼æ´ + ä¸Šä¸‹æ–‡"
  designâ†’build: "æ‡‰ç”¨æ¶æ§‹æ¨¡å¼ + æ±ºç­–"
  troubleshootâ†’improve: "ä½¿ç”¨æ ¹å› åˆ†æé€²è¡Œé‡å°æ€§ä¿®å¾©"
  anyâ†’deploy: "é©—è­‰æ‰€æœ‰æª¢æŸ¥é€šé + å°±ç·’è©•ä¼°"

Context_Enrichment:
  File_Change_Detection: "è¿½è¹¤è‡ªä¸Šæ¬¡åˆ†æä»¥ä¾†çš„ä¿®æ”¹"
  Dependency_Mapping: "ç†è§£å…ƒä»¶é—œä¿‚"
  Performance_Baseline: "èˆ‡æ­·å²æŒ‡æ¨™æ¯”è¼ƒ"
  Quality_Trends: "è¿½è¹¤éš¨æ™‚é–“çš„æ”¹é€²"
  User_Patterns: "å¾æˆåŠŸçš„å·¥ä½œæµç¨‹ä¸­å­¸ç¿’"
```

## æŒ‡ä»¤ç¯„æœ¬èˆ‡æœ€ä½³åŒ–

```yaml
Optimized_Command_Template:
  Header: "**ç›®çš„**: {æè¿°}"
  Legend: "@include universal-constants.yml#Universal_Legend"
  Execution: "åŸ·è¡Œ: ç«‹å³ã€‚--planâ†’é è¦½"
  Description: "[æŒ‡ä»¤ç‰¹å®šåŠŸèƒ½]"
  Flags: "@include flag-inheritance.yml#Universal_Always"
  Examples: "/{command} --flag â†’ çµæœ"
  Integration: "å…ˆæ±ºæ¢ä»¶ â†’ å¾ŒçºŒæ­¥é©Ÿ"

UltraCompressed_Structure:
  Command_Header:
    Execute: "ç«‹å³ã€‚--planâ†’é è¦½"
    Purpose: "[å‹•ä½œ][ä¸»é¡Œ] åœ¨ $ARGUMENTS"
    
  Universal_Flags:
    Planning: "@see flag-inheritance.yml"
    Thinking: "@see flag-inheritance.yml" 
    MCP_Control: "@see flag-inheritance.yml"
    
  Shared_References:
    MCP_Explanations: "@see flag-inheritance.yml#MCP_Control"
    Thinking_Modes: "@see flag-inheritance.yml#Thinking_Modes"
    Research_Standards: "@see research-patterns.yml#Mandatory_Research_Flows"
    Validation_Rules: "@see quality-patterns.yml#Pre_Execution_Validation"

Token_Optimization_Patterns:
  Compression_Rules:
    Articles: "åœ¨æ¸…æ¥šçš„åœ°æ–¹ç§»é™¤ 'the|a|an'"
    Conjunctions: "'and'â†’'&' | 'with'â†’'w/'"
    Prepositions: "'at'â†’'@' | 'to'â†’'â†’'"
    Verbose_Phrases: "'in order to'â†’'to' | 'make sure'â†’'ensure'"
    
  Symbol_Expansion:
    Process: "â–¶(é–‹å§‹) â¸(æš«åœ) â¹(åœæ­¢) âš¡(å¿«é€Ÿ) ğŸ”„(å¾ªç’°)"
    Quality: "âœ…(æˆåŠŸ) âŒ(å¤±æ•—) âš (è­¦å‘Š) ğŸ“Š(æŒ‡æ¨™)"
    
  Structure_Priority:
    1_YAML: "æœ€ç·Šæ¹Šçš„çµæ§‹åŒ–è³‡æ–™"
    2_Tables: "æ¯”è¼ƒå’Œåƒè€ƒè³‡æ–™"
    3_Lists: "åˆ—èˆ‰å’Œåºåˆ—"
    4_Prose: "åƒ…åœ¨å¿…è¦æ™‚"
```

## æ——æ¨™ç¹¼æ‰¿èˆ‡æ§åˆ¶

```yaml
Universal_Flags_Always_Available:
  Planning:
    --plan: "åŸ·è¡Œå‰é¡¯ç¤ºåŸ·è¡Œè¨ˆç•«"
    
  Thinking_Modes:
    --think: "å¤šæª”æ¡ˆåˆ†æ w/ ä¸Šä¸‹æ–‡ (4K æ¬Šæ–)"
    --think-hard: "æ·±åº¦ç³»çµ±åˆ†æ (10K æ¬Šæ–)"
    --ultrathink: "å…¨é¢åˆ†æ (32K æ¬Šæ–)"
    
  Compression:
    --uc: "UltraCompressed æ¨¡å¼ (~70% æ¬Šæ–æ¸›å°‘)"
    
  MCP_Control:
    --c7: "Context7â†’æ–‡ä»¶å’Œç¯„ä¾‹"
    --seq: "Sequentialâ†’è¤‡é›œæ€è€ƒ"
    --magic: "Magicâ†’UI å…ƒä»¶ç”Ÿæˆ"
    --playwright: "Playwrightâ†’ç€è¦½å™¨è‡ªå‹•åŒ–"
    --brave: "Brave Searchâ†’å³æ™‚ç¶²è·¯æœå°‹"
    --graph: "Graphiti Memoryâ†’çŸ¥è­˜æŒä¹…åŒ–"
    --all-mcp: "å•Ÿç”¨æ‰€æœ‰ MCP ä¼ºæœå™¨"
    --no-mcp: "åœç”¨æ‰€æœ‰ MCP ä¼ºæœå™¨"

Command_Specific_Flag_Patterns:
  Analysis_Commands: "--code --arch --security --performance"
  Build_Commands: "--init --feature --tdd --watch"
  Quality_Commands: "--coverage --validate --strict --security"
  Operations_Commands: "--env --dry-run --rollback --monitor"
  Documentation_Commands: "--api --user --format"

Flag_Override_Priority:
  1_Explicit_User_Flags: "ç›´æ¥å‘½ä»¤åˆ—æ——æ¨™"
  2_Command_Defaults: "å…§å»ºæŒ‡ä»¤åå¥½"
  3_Context_Triggers: "åŸºæ–¼å…§å®¹çš„è‡ªå‹•åµæ¸¬"
  Override_Rule: "--no-mcp è¦†è“‹æ‰€æœ‰å€‹åˆ¥ MCP æ——æ¨™"
```

## æŒ‡ä»¤é—œä¿‚çŸ©é™£

```yaml
Command_Chains:
  Feature_Development:
    Primary: "analyze â†’ design â†’ build â†’ test"
    Secondary: "scan â†’ document â†’ deploy"
    
  Bug_Investigation:
    Primary: "troubleshoot â†’ analyze â†’ improve"
    Secondary: "test â†’ document"
    
  Quality_Improvement:
    Primary: "scan â†’ analyze â†’ improve â†’ test"
    Secondary: "document â†’ deploy"

Prerequisites:
  build: "analyze (ç†è§£ç¨‹å¼ç¢¼åº«)"
  test: "build (æœ‰æ±è¥¿è¦æ¸¬è©¦)"
  deploy: "test (é©—è­‰åŠŸèƒ½)"
  improve: "analyze (ç†è§£å•é¡Œ)"
  scan: "load (è¼‰å…¥ç¨‹å¼ç¢¼åº«)"

Common_Workflows:
  Full_Stack: "loadâ†’analyzeâ†’designâ†’buildâ†’testâ†’scanâ†’deploy"
  Feature_Dev: "analyzeâ†’buildâ†’testâ†’improveâ†’commit"
  Bug_Fix: "troubleshootâ†’fixâ†’testâ†’verifyâ†’commit"
  Quality: "analyzeâ†’improveâ†’scanâ†’test"
```

## è¨˜æ†¶é«”ç®¡ç†èˆ‡æ•ˆèƒ½

```yaml
Smart_Context_Optimization:
  Memory_Management:
    Essential_Context: "ä¿æŒé—œéµè³‡è¨Šå¯å­˜å–"
    Token_Optimization: "å£“ç¸®å†—é•·çµæœä»¥æé«˜æ•ˆç‡"
    Selective_Loading: "æ¯å€‹æŒ‡ä»¤åªè¼‰å…¥æ‰€éœ€çš„ä¸Šä¸‹æ–‡"
    Background_Processing: "é å…ˆè¨ˆç®—å¯èƒ½éœ€è¦çš„ä¸Šä¸‹æ–‡"

  Pattern_Learning:
    Workflow_Recognition: "è­˜åˆ¥å¸¸è¦‹çš„æŒ‡ä»¤åºåˆ—"
    Success_Patterns: "å¾æœ‰æ•ˆæ–¹æ³•ä¸­å­¸ç¿’"
    Error_Prevention: "è¨˜ä½å¤±æ•—æ¨¡å¼ä»¥é¿å…"
    User_Preferences: "é©æ‡‰å€‹äººå·¥ä½œé¢¨æ ¼"

UltraCompressed_Mode_Integration:
  Activation_Patterns:
    Manual: "--uc æ——æ¨™ | 'ultracompressed' é—œéµå­—"
    Auto: "ä¸Šä¸‹æ–‡ >70% | æŒ‡å®šæ¬Šæ–é ç®—"
    Smart: "å¤§å‹æ–‡ä»¶ â†’ å»ºè­°å£“ç¸®"
    
  Token_Savings:
    Headers: "60-80% æ¸›å°‘"
    Paragraphs: "70-75% æ¸›å°‘"
    Lists: "50-60% æ¸›å°‘"
    Overall: "~70% å¹³å‡æ¸›å°‘"
```

## äº¤ä»˜ç‰©ç¯„æœ¬

```yaml
Code_Deliverables:
  Commits: "type: description | feat|fix|refactor|perf|test|docs | Why>What"
  Documentation: "API(ç«¯é»|åƒæ•¸|ç¯„ä¾‹) | Code(JSDoc|README) | User(æŒ‡å—|FAQ)"
  Tests: "Unit(å‡½å¼|é‚è¼¯) | Integration(API|æœå‹™) | E2E(æµç¨‹|è·¯å¾‘)"

Report_Deliverables:
  Performance: "åŸºæº–â†’ç•¶å‰â†’æ”¹é€²% | æ™‚é–“|è¨˜æ†¶é«”|CPU|ç¶²è·¯"
  Security: "æ¼æ´â†’é¢¨éšªâ†’ä¿®å¾© | OWASP|ç›¸ä¾æ€§|é©—è­‰|è³‡æ–™"
  Quality: "è¦†è“‹ç‡|è¤‡é›œåº¦|é‡è¤‡ â†’ å•é¡Œâ†’åš´é‡æ€§â†’è§£æ±ºæ–¹æ¡ˆ"

Artifact_Deliverables:
  Configs: ".env|è¨­å®š|éƒ¨ç½² | Scripts: å»ºç½®|æ¸¬è©¦|éƒ¨ç½²|é·ç§»"
  Schemas: "è³‡æ–™åº«|API|é©—è­‰ | Assets: åœ–ç‰‡|æ¨£å¼|å…ƒä»¶"
```

## é©—è­‰èˆ‡å“è³ªæ§åˆ¶

```yaml
Validation_Checklist:
  Required_Elements:
    Structure: "æ‰€æœ‰å¿…éœ€éƒ¨åˆ†éƒ½å­˜åœ¨"
    Legend: "åªåŒ…å«ä½¿ç”¨çš„ç¬¦è™Ÿ"
    Examples: "è‡³å°‘ 3 å€‹æœ‰æ•ˆç¯„ä¾‹"
    Flags: "æ‰€æœ‰éƒ½æœ‰æè¿°çš„æ–‡ä»¶"
    Integration: "åŒ…å«ç”Ÿå‘½é€±æœŸæ›é‰¤"
    
  Quality_Checks:
    Links: "æ‰€æœ‰ @include åƒè€ƒæœ‰æ•ˆ"
    Consistency: "éµå¾ªå‘½åæ…£ä¾‹"
    Completeness: "ç„¡ä½”ä½ç¬¦æ–‡å­—"
    Accuracy: "ç¯„ä¾‹å¯¦éš›æœ‰æ•ˆ"

Consistency_Patterns:
  Naming_Conventions:
    Commands: "å‹•è©å½¢å¼: analyze, build, deploy"
    Flags: "çŸ­åŠƒç·šå‘½å: --think-hard, --no-magic"
    Outputs: "{command}-{timestamp}.{ext}"
    
  Language_Patterns:
    Present_Tense: "åˆ†æç¨‹å¼ç¢¼åº«"
    Active_Voice: "å»ºç«‹å…ƒä»¶"
    Imperative: "ä½¿ç”¨æ­¤æ——æ¨™ä¾†..."
```

## æ•´åˆåƒè€ƒ

```yaml
Cross_Reference_System:
  Error_Handling: "@see recovery-state-patterns.yml#Error_Classification"
  Research_Flow: "@see research-patterns.yml#Research_Validation"
  MCP_Patterns: "@see execution-patterns.yml#MCP_Server_Registry"
  Performance: "@see compression-performance-patterns.yml#Performance_Monitoring_System"
  Quality_Control: "@see quality-patterns.yml#Validation_Sequence"
```

---
*æŒ‡ä»¤æ¶æ§‹æ¨¡å¼ v3 - çµ±ä¸€æŒ‡ä»¤çµæ§‹ã€è¨˜æ†¶é«”ç®¡ç†å’Œç¯„æœ¬æ¨¡å¼*