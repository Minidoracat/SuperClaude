---
allowed-tools: [Read, Write, Edit, Glob, Grep, TodoWrite, Task, mcp__sequential-thinking__sequentialthinking, mcp__context7__context7]
description: "從 PRD 和功能需求產生結構化的實作工作流程，並提供專家指導"
wave-enabled: true
complexity-threshold: 0.6
performance-profile: complex
personas: [architect, analyzer, frontend, backend, security, devops, project-manager]
mcp-servers: [sequential, context7, magic]
---

# /sc:workflow - 實作工作流程產生器

## 目的
分析產品需求文件（PRD）和功能規格，產生全面的、逐步的實作工作流程，包含專家指導、相依性映射和自動化任務協調。

## 使用方式
```
/sc:workflow [prd-檔案|功能描述] [--persona 專家] [--c7] [--sequential] [--strategy systematic|agile|mvp] [--output roadmap|tasks|detailed]
```

## 參數
- `prd-檔案|功能描述` - PRD 檔案路徑或直接的功能描述
- `--persona` - 強制使用特定專家角色（architect、frontend、backend、security、devops 等）
- `--strategy` - 工作流程策略（systematic 系統化、agile 敏捷、mvp）
- `--output` - 輸出格式（roadmap 路線圖、tasks 任務、detailed 詳細）
- `--estimate` - 包含時間和複雜度估算
- `--dependencies` - 映射外部相依性和整合
- `--risks` - 包含風險評估和緩解策略
- `--parallel` - 識別可並行的工作流
- `--milestones` - 建立基於里程碑的專案階段

## MCP 整合旗標
- `--c7` / `--context7` - 啟用 Context7 以獲取框架模式和最佳實踐
- `--sequential` - 啟用 Sequential 思考進行複雜的多步驟分析
- `--magic` - 啟用 Magic 進行 UI 元件工作流程規劃
- `--all-mcp` - 啟用所有 MCP 伺服器以進行全面的工作流程產生

## 工作流程策略

### 系統化策略（預設）
1. **需求分析** - 深入研究 PRD 結構和驗收標準
2. **架構規劃** - 系統設計和元件架構
3. **相依性映射** - 識別所有內部和外部相依性
4. **實作階段** - 具有明確交付成果的循序階段
5. **測試策略** - 每個階段的全面測試方法
6. **部署規劃** - 生產環境上線和監控策略

### 敏捷策略
1. **史詩分解** - 將 PRD 轉換為使用者故事和史詩
2. **衝刺規劃** - 將工作組織成迭代衝刺
3. **MVP 定義** - 識別最小可行產品範圍
4. **迭代開發** - 規劃持續交付和回饋
5. **利害關係人參與** - 定期審查和調整週期
6. **回顧規劃** - 內建改進和學習週期

### MVP 策略
1. **核心功能識別** - 簡化至基本功能
2. **快速原型製作** - 專注於快速驗證和回饋
3. **技術債務規劃** - 識別捷徑和未來改進
4. **驗證指標** - 定義成功標準和測量
5. **擴展路線圖** - 規劃 MVP 後的功能擴展
6. **使用者回饋整合** - 結構化的使用者輸入方法

## 專家角色自動啟用

### 前端工作流程（`--persona frontend` 或自動偵測）
- **UI/UX 分析** - 設計系統整合和元件規劃
- **狀態管理** - 資料流和狀態架構
- **效能最佳化** - 套件最佳化和延遲載入
- **無障礙合規** - WCAG 指導原則和包容性設計
- **瀏覽器相容性** - 跨瀏覽器測試策略
- **行動響應式** - 響應式設計實作計畫

### 後端工作流程（`--persona backend` 或自動偵測）
- **API 設計** - RESTful/GraphQL 端點規劃
- **資料庫架構** - 資料建模和遷移策略
- **安全實作** - 身份驗證、授權和資料保護
- **效能擴展** - 快取、最佳化和負載處理
- **服務整合** - 第三方 API 和微服務
- **監控與記錄** - 可觀察性和除錯基礎設施

### 架構工作流程（`--persona architect` 或自動偵測）
- **系統設計** - 高階架構和服務邊界
- **技術堆疊** - 框架和工具選擇理由
- **可擴展性規劃** - 成長考量和瓶頸預防
- **安全架構** - 全面的安全策略
- **整合模式** - 服務通訊和資料流
- **DevOps 策略** - CI/CD 管道和基礎設施即程式碼

### 安全工作流程（`--persona security` 或自動偵測）
- **威脅建模** - 安全風險評估和攻擊向量
- **資料保護** - 加密、隱私和合規要求
- **身份驗證策略** - 使用者身分和存取管理
- **安全測試** - 滲透測試和漏洞評估
- **合規驗證** - 法規要求（GDPR、HIPAA 等）
- **事件回應** - 安全監控和違規協定

### DevOps 工作流程（`--persona devops` 或自動偵測）
- **基礎設施規劃** - 雲端架構和資源配置
- **CI/CD 管道** - 自動化測試、建構和部署
- **環境管理** - 開發、預備和生產環境
- **監控策略** - 應用程式和基礎設施監控
- **備份與復原** - 資料保護和災難復原規劃
- **效能監控** - APM 工具和效能最佳化

## 輸出格式

### 路線圖格式（`--output roadmap`）
```
# 功能實作路線圖
## 第 1 階段：基礎（第 1-2 週）
- [ ] 架構設計和技術選擇
- [ ] 資料庫架構設計和設定
- [ ] 基本專案結構和 CI/CD 管道

## 第 2 階段：核心實作（第 3-6 週）
- [ ] API 開發和身份驗證
- [ ] 前端元件和使用者介面
- [ ] 整合測試和安全驗證

## 第 3 階段：增強與上線（第 7-8 週）
- [ ] 效能最佳化和負載測試
- [ ] 使用者驗收測試和錯誤修復
- [ ] 生產部署和監控設定
```

### 任務格式（`--output tasks`）
```
# 實作任務
## 史詩：使用者認證系統
### 故事：使用者註冊
- [ ] 設計註冊表單 UI 元件
- [ ] 實作後端註冊 API
- [ ] 新增電子郵件驗證工作流程
- [ ] 建立使用者導覽流程

### 故事：使用者登入
- [ ] 設計登入介面
- [ ] 實作 JWT 認證
- [ ] 新增密碼重設功能
- [ ] 設定會話管理
```

### 詳細格式（`--output detailed`）
```
# 詳細實作工作流程
## 任務：實作使用者註冊 API
**角色**：後端開發者
**預估時間**：8 小時
**相依性**：資料庫架構、認證服務
**MCP 脈絡**：Express.js 模式、安全最佳實踐

### 實作步驟：
1. **設定 API 端點**（1 小時）
   - 建立 POST /api/register 路由
   - 新增輸入驗證中介軟體
   
2. **資料庫整合**（2 小時）
   - 實作使用者模型
   - 新增密碼雜湊
   
3. **安全措施**（3 小時）
   - 速率限制實作
   - 輸入淨化
   - SQL 注入預防
   
4. **測試**（2 小時）
   - 註冊邏輯的單元測試
   - API 端點的整合測試

### 驗收標準：
- [ ] 使用者可以使用電子郵件和密碼註冊
- [ ] 密碼經過適當雜湊處理
- [ ] 強制執行電子郵件驗證
- [ ] 速率限制防止濫用
```

## 進階功能

### 相依性分析
- **內部相依性** - 識別元件和功能之間的耦合
- **外部相依性** - 映射第三方服務和 API
- **技術相依性** - 框架版本、資料庫需求
- **團隊相依性** - 跨團隊協調需求
- **基礎設施相依性** - 雲端服務、部署需求

### 風險評估與緩解
- **技術風險** - 複雜性、效能和可擴展性問題
- **時程風險** - 相依性瓶頸和資源限制
- **安全風險** - 資料保護和合規漏洞
- **業務風險** - 市場變化和需求演變
- **緩解策略** - 備案計畫和替代方法

### 並行工作流識別
- **獨立元件** - 可同時開發的功能
- **共享相依性** - 需要協調的通用元件
- **關鍵路徑分析** - 阻礙其他工作的瓶頸
- **資源分配** - 團隊容量和技能分配
- **溝通協定** - 並行流之間的協調

## 與 SuperClaude 生態系統整合

### TodoWrite 整合
- 自動為即時的下一步建立會話任務
- 在整個工作流程執行過程中提供進度追蹤
- 將工作流程階段連結到可執行的開發任務

### Task 指令整合
- 將工作流程轉換為階層式專案任務（`/sc:task`）
- 啟用跨會話持久性和進度追蹤
- 支援使用 `/sc:spawn` 的複雜協調

### Implementation 指令整合
- 無縫連接到 `/sc:implement` 進行功能開發
- 提供具有脈絡感知的實作指導
- 為每個工作流程階段自動啟用適當的角色

### Analysis 指令整合
- 利用 `/sc:analyze` 進行程式碼庫評估
- 將現有程式碼模式整合到工作流程規劃中
- 識別重構機會和技術債務

## 使用範例

### 從 PRD 檔案產生工作流程
```
/sc:workflow docs/feature-100-prd.md --strategy systematic --c7 --sequential --estimate
```

### 建立前端專注的工作流程
```
/sc:workflow "具有即時分析的使用者儀表板" --persona frontend --magic --output detailed
```

### 具有風險評估的 MVP 規劃
```
/sc:workflow 使用者認證系統 --strategy mvp --risks --parallel --milestones
```

### 具有相依性的後端 API 工作流程
```
/sc:workflow 付款處理-api --persona backend --dependencies --c7 --output tasks
```

### 全端功能工作流程
```
/sc:workflow 社群媒體整合 --all-mcp --sequential --parallel --estimate --output roadmap
```

## 品質關卡和驗證

### 工作流程完整性檢查
- **需求覆蓋** - 確保涵蓋所有 PRD 需求
- **驗收標準** - 驗證可測試的成功標準
- **技術可行性** - 評估實作複雜度和風險
- **資源對齊** - 將工作流程與團隊能力和時程相匹配

### 最佳實踐驗證
- **架構模式** - 確保遵守既定模式
- **安全標準** - 在每個階段驗證安全考量
- **效能需求** - 包含效能目標和監控
- **可維護性** - 規劃長期程式碼維護和更新

### 利害關係人對齊
- **業務需求** - 確保明確定義業務價值
- **技術需求** - 驗證技術規格和限制
- **時程期望** - 實際的估算和里程碑規劃
- **成功指標** - 定義可測量的結果和 KPI

## 效能最佳化

### 工作流程產生速度
- **PRD 解析** - 高效的文件分析和需求擷取
- **模式識別** - 快速識別常見的實作模式
- **範本應用** - 常見場景的可重複使用工作流程範本
- **增量產生** - 漸進式工作流程精進和最佳化

### 脈絡管理
- **記憶體效率** - 大型 PRD 的最佳脈絡使用
- **快取策略** - 在相似工作流程中重複使用分析結果
- **漸進式載入** - 按需載入工作流程詳細資訊
- **壓縮** - 高效儲存和擷取工作流程資料

## 成功指標

### 工作流程品質
- **實作成功率** - 遵循工作流程的功能完成率 >90%
- **時程準確度** - 與估算時程的差異 <20%
- **需求覆蓋率** - 100% PRD 需求映射到工作流程任務
- **利害關係人滿意度** - 對工作流程清晰度和完整性的滿意度 >85%

### 效能目標
- **工作流程產生** - 標準 PRD <30 秒
- **相依性分析** - 複雜系統 <60 秒
- **風險評估** - 全面評估 <45 秒
- **脈絡整合** - MCP 伺服器協調 <10 秒

## Claude Code 整合
- **多工具協調** - 協調 Read、Write、Edit、Glob、Grep 進行全面分析
- **漸進式任務建立** - 使用 TodoWrite 處理即時的下一步，使用 Task 進行長期規劃
- **MCP 伺服器協調** - 根據工作流程需求智慧路由到 Context7、Sequential 和 Magic
- **跨指令整合** - 無縫移交給 implement、analyze、design 和其他 SuperClaude 指令
- **基於證據的規劃** - 在整個工作流程產生過程中維護決策和理由的稽核追蹤